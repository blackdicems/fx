<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Lot Calculator</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.2.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/df-number-format/2.1.6/jquery.number.min.js"></script>

</head>

<body>

    <main>
        <div class="container py-4">
            <header class="pb-3 mb-4 border-bottom">
                <span class="fs-4">Lot Calcurator</span>
            </header>

            <div class="row align-items-md-stretch">
                <div class="col-md-6">
                    <div class="h-100 p-5 text-white bg-dark rounded-3">
                        <form>
                            <div class="mb-3">
                                <label for="initial_balance" class="form-label">เงินทุน ($)</label>
                                <input type="number" class="form-control" id="initial_balance" placeholder="$" value="20000">
                            </div>
                            <div class="mb-3">
                                <label for="risk" class="form-label">ความเสี่ยง (%)</label>
                                <input type="number" class="form-control" id="risk" placeholder="%" min="1" max="100" value="1">
                            </div>
                            <div class="mb-3">
                                <label for="open_price" class="form-label">Open Price</label>
                                <input type="number" class="form-control" id="open_price" value="1820" step=".01">
                            </div>
                            <div class="mb-3">
                                <label for="stop_lost_price" class="form-label">Stop Lost Price</label>
                                <input type="number" class="form-control" id="stop_lost_price" value="1822" step=".01">
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="h-100 p-5 bg-light border rounded-3">
                        <form>
                            <div class="mb-3">
                                <label for="sl_point" class="form-label">Open ถึง SL (จุด)</label>
                                <input type="number" class="form-control" id="sl_point" value="200" disabled>
                            </div>
                            <div class="mb-3">
                                <label for="lost_cost" class="form-label">ถ้าชน SL เสีย ($)</label>
                                <input type="number" class="form-control" id="lost_cost" value="200" disabled>
                            </div>
                            <div class="mb-3">
                                <label for="lot_recommend" class="form-label">Lot ที่ควรออก</label>
                                <input type="number" class="form-control" id="lot_recommend" value="1.00" disabled>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        $(document).ready(function() {

            let initial_balance = 20000;
            let risk = 1;
            let open_price = 1820;
            let stop_lost_price = 1822;

            let sl_point = $('#sl_point');
            let lost_cost = $('#lost_cost');
            let lot_recommend = $('#lot_recommend');

            let to_sl_lost_value = 200;
            let to_sl_range_value = 200;
            let lot_recommend_value = 1.0;

            $('#initial_balance').on('change', function(e) {
                initial_balance = $(this).val();

                to_sl_lost();
                cal_3();
            });

            $('#risk').on('change', function(e) {
                risk = $(this).val();

                to_sl_lost();
                cal_3();
            });

            $('#open_price').on('change', function(e) {
                open_price = $(this).val();
                to_sl_range();
                cal_3();
            });

            $('#stop_lost_price').on('change', function(e) {
                stop_lost_price = $(this).val();
                to_sl_range();
                cal_3();
            });

            function to_sl_range() {
                to_sl_range_value = Math.abs((stop_lost_price - open_price).toFixed(2)) * 100
                sl_point.val(to_sl_range_value);
            }

            function to_sl_lost() {
                to_sl_lost_value = (initial_balance * risk) / 100;
                lost_cost.val(to_sl_lost_value);
            }

            function cal_3() {
                let lot_recommend_value = (to_sl_lost_value / to_sl_range_value).toFixed(2);
                lot_recommend.val(lot_recommend_value);
            }
        });
    </script>
</body>

</html>
